{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive\\\\Desktop\\\\MySociety\\\\Frontend\\\\src\\\\pages\\\\Community.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../api/api';\nimport { useAuth } from '../context/AuthContext';\nimport io from 'socket.io-client';\nimport PageTransition from '../components/PageTransition';\nimport { FaBullhorn, FaTools, FaEdit, FaTrash, FaCheck, FaPlus, FaTimes, FaImage } from 'react-icons/fa';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Community = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [activeTab, setActiveTab] = useState('notices');\n  const [notices, setNotices] = useState([]);\n  const [complaints, setComplaints] = useState([]);\n  const [noticeForm, setNoticeForm] = useState({\n    title: '',\n    content: '',\n    priority: 'medium'\n  });\n  const [complaintForm, setComplaintForm] = useState({\n    title: '',\n    description: ''\n  });\n  const [complaintImage, setComplaintImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [isSubmittingComplaint, setIsSubmittingComplaint] = useState(false);\n  const [editingNoticeId, setEditingNoticeId] = useState(null);\n  const [editingComplaintId, setEditingComplaintId] = useState(null);\n  const fetchData = async () => {\n    try {\n      const [resNotice, resComplaint] = await Promise.all([api.get('/community/notices'), api.get('/community/complaints')]);\n      setNotices(resNotice.data);\n      setComplaints(resComplaint.data);\n    } catch (err) {\n      console.error(\"Error fetching community data\");\n    }\n  };\n  useEffect(() => {\n    fetchData();\n    const socket = io('http://localhost:5000');\n    socket.on('community_update', () => {\n      fetchData();\n    });\n    return () => socket.disconnect();\n  }, []);\n\n  // --- NOTICE HANDLERS ---\n  const startEditNotice = n => {\n    setEditingNoticeId(n._id);\n    setNoticeForm(n);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n  const cancelEditNotice = () => {\n    setEditingNoticeId(null);\n    setNoticeForm({\n      title: '',\n      content: '',\n      priority: 'medium'\n    });\n  };\n  const handlePostNotice = async e => {\n    e.preventDefault();\n    try {\n      if (editingNoticeId) {\n        await api.put(`/community/notices/${editingNoticeId}`, noticeForm);\n        setEditingNoticeId(null);\n      } else {\n        await api.post('/community/notices', noticeForm);\n      }\n      setNoticeForm({\n        title: '',\n        content: '',\n        priority: 'medium'\n      });\n    } catch (e) {\n      alert('Error');\n    }\n  };\n  const handleDeleteNotice = async id => {\n    if (window.confirm(\"Delete?\")) try {\n      await api.delete(`/community/notices/${id}`);\n    } catch (e) {}\n  };\n\n  // --- COMPLAINT HANDLERS ---\n\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setComplaintImage(file);\n      setImagePreview(URL.createObjectURL(file));\n    }\n  };\n  const clearImageSelection = () => {\n    setComplaintImage(null);\n    setImagePreview(null);\n  };\n  const startEditComplaint = c => {\n    setEditingComplaintId(c._id);\n    setComplaintForm(c);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n  const cancelEditComplaint = () => {\n    setEditingComplaintId(null);\n    setComplaintForm({\n      title: '',\n      description: ''\n    });\n    clearImageSelection();\n  };\n  const handlePostComplaint = async e => {\n    e.preventDefault();\n    setIsSubmittingComplaint(true);\n    try {\n      let res;\n      if (editingComplaintId) {\n        res = await api.put(`/community/complaints/${editingComplaintId}`, complaintForm);\n        setEditingComplaintId(null);\n      } else {\n        const formData = new FormData();\n        formData.append('title', complaintForm.title);\n        formData.append('description', complaintForm.description);\n        if (complaintImage) formData.append('image', complaintImage);\n        res = await api.post('/community/complaints', formData);\n      }\n\n      // Use the full response data from backend which includes imageUrl and populated postedBy\n      const newComplaint = res.data;\n      console.log('Posted complaint:', newComplaint); // Debug log\n\n      if (editingComplaintId) {\n        setComplaints(prev => prev.map(c => c._id === editingComplaintId ? newComplaint : c));\n      } else {\n        setComplaints(prev => [newComplaint, ...prev]);\n      }\n      setComplaintForm({\n        title: '',\n        description: ''\n      });\n      clearImageSelection();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Complaint upload error:', error);\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || 'Unknown error';\n      alert('Upload/Update Failed: ' + errorMsg);\n    } finally {\n      setIsSubmittingComplaint(false);\n    }\n  };\n  const handleDeleteComplaint = async id => {\n    if (window.confirm(\"Delete?\")) try {\n      await api.delete(`/community/complaints/${id}`);\n    } catch (e) {}\n  };\n  const handleResolveComplaint = async id => {\n    try {\n      await api.put(`/community/complaints/${id}/resolve`);\n    } catch (e) {}\n  };\n  return /*#__PURE__*/_jsxDEV(PageTransition, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"fw-bold\",\n          children: \"Community Hub\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${activeTab === 'notices' ? 'btn-primary' : 'btn-outline-secondary'}`,\n          onClick: () => setActiveTab('notices'),\n          children: [/*#__PURE__*/_jsxDEV(FaBullhorn, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), \" Notices\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${activeTab === 'complaints' ? 'btn-primary' : 'btn-outline-secondary'}`,\n          onClick: () => setActiveTab('complaints'),\n          children: [/*#__PURE__*/_jsxDEV(FaTools, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), \" Helpdesk\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), activeTab === 'notices' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-4 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `card p-3 ${editingNoticeId ? 'border-warning' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"fw-bold mb-3\",\n              children: editingNoticeId ? '‚úèÔ∏è Edit Notice' : '‚ûï Post Announcement'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handlePostNotice,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-2\",\n                placeholder: \"Title\",\n                value: noticeForm.title,\n                onChange: e => setNoticeForm({\n                  ...noticeForm,\n                  title: e.target.value\n                }),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select mb-2\",\n                value: noticeForm.priority,\n                onChange: e => setNoticeForm({\n                  ...noticeForm,\n                  priority: e.target.value\n                }),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"low\",\n                  children: \"Low Priority\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"medium\",\n                  children: \"Medium Priority\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"high\",\n                  children: \"High Priority\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control mb-3\",\n                rows: \"3\",\n                placeholder: \"Content...\",\n                value: noticeForm.content,\n                onChange: e => setNoticeForm({\n                  ...noticeForm,\n                  content: e.target.value\n                }),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn w-100 ${editingNoticeId ? 'btn-warning' : 'btn-primary'}`,\n                  children: editingNoticeId ? 'Update' : 'Post'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 41\n                }, this), editingNoticeId && /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-secondary\",\n                  onClick: cancelEditNotice,\n                  children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 140\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 61\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-8\",\n          children: [notices.map(notice => {\n            var _notice$postedBy;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card mb-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-start mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      className: \"fw-bold mb-1\",\n                      children: notice.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `badge ${notice.priority === 'high' ? 'bg-danger' : notice.priority === 'medium' ? 'bg-warning text-dark' : 'bg-success'}`,\n                      children: [notice.priority, \" priority\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 45\n                  }, this), notice.postedBy && notice.postedBy._id === user._id && /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-sm btn-outline-primary me-2\",\n                      onClick: () => startEditNotice(notice),\n                      children: /*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 184,\n                        columnNumber: 149\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-sm btn-outline-danger\",\n                      onClick: () => handleDeleteNotice(notice._id),\n                      children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 150\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-text opacity-75\",\n                  children: notice.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: [\"Posted by \", (_notice$postedBy = notice.postedBy) === null || _notice$postedBy === void 0 ? void 0 : _notice$postedBy.name, \" \\u2022 \", new Date(notice.createdAt).toLocaleDateString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 37\n              }, this)\n            }, notice._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 33\n            }, this);\n          }), notices.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted text-center mt-4\",\n            children: \"No notices yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 54\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }, this), activeTab === 'complaints' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-4 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `card p-3 ${editingComplaintId ? 'border-warning' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"fw-bold mb-3\",\n              children: editingComplaintId ? '‚úèÔ∏è Edit Complaint' : 'üõ†Ô∏è Raise Ticket'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handlePostComplaint,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-2\",\n                placeholder: \"Subject\",\n                value: complaintForm.title,\n                onChange: e => setComplaintForm({\n                  ...complaintForm,\n                  title: e.target.value\n                }),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control mb-3\",\n                rows: \"3\",\n                placeholder: \"Describe issue...\",\n                value: complaintForm.description,\n                onChange: e => setComplaintForm({\n                  ...complaintForm,\n                  description: e.target.value\n                }),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 37\n              }, this), !editingComplaintId && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label small text-muted\",\n                  children: [/*#__PURE__*/_jsxDEV(FaImage, {\n                    className: \"me-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 92\n                  }, this), \" Attach Photo\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  className: \"form-control form-control-sm mb-2\",\n                  accept: \"image/*\",\n                  onChange: handleImageChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 45\n                }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"position-relative\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: imagePreview,\n                    alt: \"Preview\",\n                    className: \"img-fluid rounded border\",\n                    style: {\n                      maxHeight: '200px',\n                      width: '100%',\n                      objectFit: 'cover'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-sm btn-danger position-absolute top-0 end-0 m-1 rounded-circle\",\n                    onClick: clearImageSelection,\n                    children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 188\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2 mt-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn w-100 ${editingComplaintId ? 'btn-warning' : 'btn-danger'}`,\n                  disabled: isSubmittingComplaint,\n                  children: isSubmittingComplaint ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"spinner-border spinner-border-sm me-2\",\n                      role: \"status\",\n                      \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 53\n                    }, this), \"Uploading...\"]\n                  }, void 0, true) : editingComplaintId ? 'Update' : 'Submit'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 41\n                }, this), editingComplaintId && /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-secondary\",\n                  onClick: cancelEditComplaint,\n                  disabled: isSubmittingComplaint,\n                  children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 179\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 64\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-8\",\n          children: [complaints.map(comp => {\n            var _comp$postedBy, _comp$postedBy2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card mb-3 shadow-sm\",\n              style: {\n                overflow: 'hidden'\n              },\n              children: [comp.imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"complaint-image-container\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: comp.imageUrl,\n                  alt: \"Complaint Proof\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-start\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-100\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex align-items-center gap-2 mb-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                        className: \"fw-bold mb-0\",\n                        children: comp.title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 260,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `badge ${comp.status === 'resolved' ? 'bg-success' : 'bg-danger'}`,\n                        children: comp.status\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"card-text opacity-75 mb-3\",\n                      children: comp.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted d-block border-top pt-2\",\n                      children: [\"Posted by: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: (_comp$postedBy = comp.postedBy) === null || _comp$postedBy === void 0 ? void 0 : _comp$postedBy.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 267,\n                        columnNumber: 64\n                      }, this), \" (Villa \", (_comp$postedBy2 = comp.postedBy) === null || _comp$postedBy2 === void 0 ? void 0 : _comp$postedBy2.unitNumber, \")\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"float-end\",\n                        children: new Date(comp.createdAt).toLocaleDateString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 268,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex flex-column gap-2 ms-3\",\n                    children: [user.role === 'admin' && comp.status === 'open' && /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-sm btn-success\",\n                      onClick: () => handleResolveComplaint(comp._id),\n                      children: /*#__PURE__*/_jsxDEV(FaCheck, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 274,\n                        columnNumber: 145\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 53\n                    }, this), comp.postedBy && comp.postedBy._id === user._id && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-sm btn-outline-primary\",\n                        onClick: () => startEditComplaint(comp),\n                        children: /*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 278,\n                          columnNumber: 149\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 278,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-sm btn-outline-danger\",\n                        onClick: () => handleDeleteComplaint(comp._id),\n                        children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 279,\n                          columnNumber: 155\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 279,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 37\n              }, this)]\n            }, comp._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 33\n            }, this);\n          }), complaints.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted text-center mt-4\",\n            children: \"No complaints yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 57\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 9\n  }, this);\n};\n_s(Community, \"Ko6xDSqVz1ehoU1oQCs9InErUZY=\", false, function () {\n  return [useAuth];\n});\n_c = Community;\nexport default Community;\nvar _c;\n$RefreshReg$(_c, \"Community\");","map":{"version":3,"names":["React","useState","useEffect","api","useAuth","io","PageTransition","FaBullhorn","FaTools","FaEdit","FaTrash","FaCheck","FaPlus","FaTimes","FaImage","jsxDEV","_jsxDEV","Fragment","_Fragment","Community","_s","user","activeTab","setActiveTab","notices","setNotices","complaints","setComplaints","noticeForm","setNoticeForm","title","content","priority","complaintForm","setComplaintForm","description","complaintImage","setComplaintImage","imagePreview","setImagePreview","isSubmittingComplaint","setIsSubmittingComplaint","editingNoticeId","setEditingNoticeId","editingComplaintId","setEditingComplaintId","fetchData","resNotice","resComplaint","Promise","all","get","data","err","console","error","socket","on","disconnect","startEditNotice","n","_id","window","scrollTo","top","behavior","cancelEditNotice","handlePostNotice","e","preventDefault","put","post","alert","handleDeleteNotice","id","confirm","delete","handleImageChange","file","target","files","URL","createObjectURL","clearImageSelection","startEditComplaint","c","cancelEditComplaint","handlePostComplaint","res","formData","FormData","append","newComplaint","log","prev","map","_error$response","_error$response$data","errorMsg","response","message","handleDeleteComplaint","handleResolveComplaint","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","placeholder","value","onChange","required","rows","type","notice","_notice$postedBy","postedBy","name","Date","createdAt","toLocaleDateString","length","accept","src","alt","style","maxHeight","width","objectFit","disabled","role","comp","_comp$postedBy","_comp$postedBy2","overflow","imageUrl","status","unitNumber","_c","$RefreshReg$"],"sources":["C:/Users/Dell/OneDrive/Desktop/MySociety/Frontend/src/pages/Community.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../api/api';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport io from 'socket.io-client'; \r\nimport PageTransition from '../components/PageTransition';\r\nimport { FaBullhorn, FaTools, FaEdit, FaTrash, FaCheck, FaPlus, FaTimes, FaImage } from 'react-icons/fa';\r\n\r\nconst Community = () => {\r\n    const { user } = useAuth();\r\n    const [activeTab, setActiveTab] = useState('notices'); \r\n    const [notices, setNotices] = useState([]);\r\n    const [complaints, setComplaints] = useState([]);\r\n    \r\n    const [noticeForm, setNoticeForm] = useState({ title: '', content: '', priority: 'medium' });\r\n    \r\n    const [complaintForm, setComplaintForm] = useState({ title: '', description: '' });\r\n    const [complaintImage, setComplaintImage] = useState(null);\r\n    const [imagePreview, setImagePreview] = useState(null); \r\n    const [isSubmittingComplaint, setIsSubmittingComplaint] = useState(false);\r\n\r\n    const [editingNoticeId, setEditingNoticeId] = useState(null);\r\n    const [editingComplaintId, setEditingComplaintId] = useState(null);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [resNotice, resComplaint] = await Promise.all([\r\n                api.get('/community/notices'),\r\n                api.get('/community/complaints')\r\n            ]);\r\n            setNotices(resNotice.data);\r\n            setComplaints(resComplaint.data);\r\n        } catch (err) {\r\n            console.error(\"Error fetching community data\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const socket = io('http://localhost:5000'); \r\n        socket.on('community_update', () => {\r\n            fetchData(); \r\n        });\r\n        return () => socket.disconnect();\r\n    }, []);\r\n\r\n    // --- NOTICE HANDLERS ---\r\n    const startEditNotice = (n) => { setEditingNoticeId(n._id); setNoticeForm(n); window.scrollTo({top:0, behavior:'smooth'}); };\r\n    const cancelEditNotice = () => { setEditingNoticeId(null); setNoticeForm({title:'', content:'', priority:'medium'}); };\r\n    \r\n    const handlePostNotice = async (e) => { \r\n        e.preventDefault(); \r\n        try { \r\n            if(editingNoticeId) { \r\n                await api.put(`/community/notices/${editingNoticeId}`, noticeForm); \r\n                setEditingNoticeId(null); \r\n            } else { \r\n                await api.post('/community/notices', noticeForm); \r\n            } \r\n            setNoticeForm({title:'', content:'', priority:'medium'}); \r\n        } catch(e){ alert('Error'); } \r\n    };\r\n    \r\n    const handleDeleteNotice = async (id) => { \r\n        if(window.confirm(\"Delete?\")) try { await api.delete(`/community/notices/${id}`); } catch(e){} \r\n    };\r\n\r\n    // --- COMPLAINT HANDLERS ---\r\n    \r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setComplaintImage(file);\r\n            setImagePreview(URL.createObjectURL(file));\r\n        }\r\n    };\r\n\r\n    const clearImageSelection = () => {\r\n        setComplaintImage(null);\r\n        setImagePreview(null);\r\n    };\r\n\r\n    const startEditComplaint = (c) => { \r\n        setEditingComplaintId(c._id); \r\n        setComplaintForm(c); \r\n        window.scrollTo({top:0, behavior:'smooth'}); \r\n    };\r\n    \r\n    const cancelEditComplaint = () => { \r\n        setEditingComplaintId(null); \r\n        setComplaintForm({title:'', description:''}); \r\n        clearImageSelection(); \r\n    };\r\n    \r\n    const handlePostComplaint = async (e) => {\r\n        e.preventDefault();\r\n        setIsSubmittingComplaint(true);\r\n        try {\r\n            let res;\r\n            if (editingComplaintId) {\r\n                res = await api.put(`/community/complaints/${editingComplaintId}`, complaintForm);\r\n                setEditingComplaintId(null);\r\n            } else {\r\n                const formData = new FormData();\r\n                formData.append('title', complaintForm.title);\r\n                formData.append('description', complaintForm.description);\r\n                if (complaintImage) formData.append('image', complaintImage);\r\n                \r\n                res = await api.post('/community/complaints', formData);\r\n            }\r\n\r\n            // Use the full response data from backend which includes imageUrl and populated postedBy\r\n            const newComplaint = res.data;\r\n            console.log('Posted complaint:', newComplaint); // Debug log\r\n            \r\n            if(editingComplaintId) {\r\n                 setComplaints(prev => prev.map(c => c._id === editingComplaintId ? newComplaint : c));\r\n            } else {\r\n                 setComplaints(prev => [newComplaint, ...prev]);\r\n            }\r\n\r\n            setComplaintForm({ title: '', description: '' });\r\n            clearImageSelection();\r\n        } catch (error) { \r\n            console.error('Complaint upload error:', error);\r\n            const errorMsg = error.response?.data?.message || error.message || 'Unknown error';\r\n            alert('Upload/Update Failed: ' + errorMsg); \r\n        } finally {\r\n            setIsSubmittingComplaint(false);\r\n        }\r\n    };\r\n    \r\n    const handleDeleteComplaint = async (id) => { if(window.confirm(\"Delete?\")) try { await api.delete(`/community/complaints/${id}`); } catch(e){} };\r\n    const handleResolveComplaint = async (id) => { try { await api.put(`/community/complaints/${id}/resolve`); } catch(e){} };\r\n\r\n    return (\r\n        <PageTransition>\r\n            <div className=\"container mt-4\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                    <h2 className=\"fw-bold\">Community Hub</h2>\r\n                </div>\r\n                \r\n                <div className=\"d-flex gap-2 mb-4\">\r\n                    <button className={`btn ${activeTab === 'notices' ? 'btn-primary' : 'btn-outline-secondary'}`} onClick={() => setActiveTab('notices')}>\r\n                        <FaBullhorn className=\"me-2\"/> Notices\r\n                    </button>\r\n                    <button className={`btn ${activeTab === 'complaints' ? 'btn-primary' : 'btn-outline-secondary'}`} onClick={() => setActiveTab('complaints')}>\r\n                        <FaTools className=\"me-2\"/> Helpdesk\r\n                    </button>\r\n                </div>\r\n\r\n                {/* --- NOTICES SECTION --- */}\r\n                {activeTab === 'notices' && (\r\n                    <div className=\"row\">\r\n                        <div className=\"col-lg-4 mb-4\">\r\n                            <div className={`card p-3 ${editingNoticeId ? 'border-warning' : ''}`}>\r\n                                <h5 className=\"fw-bold mb-3\">{editingNoticeId ? '‚úèÔ∏è Edit Notice' : '‚ûï Post Announcement'}</h5>\r\n                                <form onSubmit={handlePostNotice}>\r\n                                    <input className=\"form-control mb-2\" placeholder=\"Title\" value={noticeForm.title} onChange={e => setNoticeForm({...noticeForm, title: e.target.value})} required />\r\n                                    <select className=\"form-select mb-2\" value={noticeForm.priority} onChange={e => setNoticeForm({...noticeForm, priority: e.target.value})}>\r\n                                        <option value=\"low\">Low Priority</option>\r\n                                        <option value=\"medium\">Medium Priority</option>\r\n                                        <option value=\"high\">High Priority</option>\r\n                                    </select>\r\n                                    <textarea className=\"form-control mb-3\" rows=\"3\" placeholder=\"Content...\" value={noticeForm.content} onChange={e => setNoticeForm({...noticeForm, content: e.target.value})} required />\r\n                                    <div className=\"d-flex gap-2\">\r\n                                        <button className={`btn w-100 ${editingNoticeId ? 'btn-warning' : 'btn-primary'}`}>{editingNoticeId ? 'Update' : 'Post'}</button>\r\n                                        {editingNoticeId && <button type=\"button\" className=\"btn btn-secondary\" onClick={cancelEditNotice}><FaTimes/></button>}\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-8\">\r\n                            {notices.map(notice => (\r\n                                <div className=\"card mb-3\" key={notice._id}>\r\n                                    <div className=\"card-body\">\r\n                                        <div className=\"d-flex justify-content-between align-items-start mb-2\">\r\n                                            <div>\r\n                                                <h5 className=\"fw-bold mb-1\">{notice.title}</h5>\r\n                                                <span className={`badge ${notice.priority === 'high' ? 'bg-danger' : notice.priority === 'medium' ? 'bg-warning text-dark' : 'bg-success'}`}>{notice.priority} priority</span>\r\n                                            </div>\r\n                                            {(notice.postedBy && notice.postedBy._id === user._id) && (\r\n                                                <div>\r\n                                                    <button className=\"btn btn-sm btn-outline-primary me-2\" onClick={() => startEditNotice(notice)}><FaEdit/></button>\r\n                                                    <button className=\"btn btn-sm btn-outline-danger\" onClick={() => handleDeleteNotice(notice._id)}><FaTrash/></button>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <p className=\"card-text opacity-75\">{notice.content}</p>\r\n                                        <small className=\"text-muted\">Posted by {notice.postedBy?.name} ‚Ä¢ {new Date(notice.createdAt).toLocaleDateString()}</small>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {notices.length === 0 && <p className=\"text-muted text-center mt-4\">No notices yet.</p>}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* --- COMPLAINTS SECTION --- */}\r\n                {activeTab === 'complaints' && (\r\n                    <div className=\"row\">\r\n                        <div className=\"col-lg-4 mb-4\">\r\n                            <div className={`card p-3 ${editingComplaintId ? 'border-warning' : ''}`}>\r\n                                <h5 className=\"fw-bold mb-3\">{editingComplaintId ? '‚úèÔ∏è Edit Complaint' : 'üõ†Ô∏è Raise Ticket'}</h5>\r\n                                <form onSubmit={handlePostComplaint}>\r\n                                    <input className=\"form-control mb-2\" placeholder=\"Subject\" value={complaintForm.title} onChange={e => setComplaintForm({...complaintForm, title: e.target.value})} required />\r\n                                    <textarea className=\"form-control mb-3\" rows=\"3\" placeholder=\"Describe issue...\" value={complaintForm.description} onChange={e => setComplaintForm({...complaintForm, description: e.target.value})} required />\r\n                                    \r\n                                    {!editingComplaintId && (\r\n                                        <div className=\"mb-3\">\r\n                                            <label className=\"form-label small text-muted\"><FaImage className=\"me-1\"/> Attach Photo</label>\r\n                                            <input type=\"file\" className=\"form-control form-control-sm mb-2\" accept=\"image/*\" onChange={handleImageChange} />\r\n                                            {imagePreview && (\r\n                                                <div className=\"position-relative\">\r\n                                                    <img src={imagePreview} alt=\"Preview\" className=\"img-fluid rounded border\" style={{ maxHeight: '200px', width: '100%', objectFit: 'cover' }} />\r\n                                                    <button type=\"button\" className=\"btn btn-sm btn-danger position-absolute top-0 end-0 m-1 rounded-circle\" onClick={clearImageSelection}><FaTimes /></button>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"d-flex gap-2 mt-3\">\r\n                                        <button \r\n                                            className={`btn w-100 ${editingComplaintId ? 'btn-warning' : 'btn-danger'}`}\r\n                                            disabled={isSubmittingComplaint}\r\n                                        >\r\n                                            {isSubmittingComplaint ? (\r\n                                                <>\r\n                                                    <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                    Uploading...\r\n                                                </>\r\n                                            ) : (\r\n                                                editingComplaintId ? 'Update' : 'Submit'\r\n                                            )}\r\n                                        </button>\r\n                                        {editingComplaintId && <button type=\"button\" className=\"btn btn-secondary\" onClick={cancelEditComplaint} disabled={isSubmittingComplaint}><FaTimes/></button>}\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-8\">\r\n                            {complaints.map(comp => (\r\n                                <div className=\"card mb-3 shadow-sm\" key={comp._id} style={{ overflow: 'hidden' }}>\r\n                                    \r\n                                    {/* --- NEW IMAGE LAYOUT: Full width at top or centered --- */}\r\n                                    {comp.imageUrl && (\r\n                                        <div className=\"complaint-image-container\">\r\n                                            <img \r\n                                                src={comp.imageUrl} \r\n                                                alt=\"Complaint Proof\" \r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"card-body\">\r\n                                        <div className=\"d-flex justify-content-between align-items-start\">\r\n                                            <div className=\"w-100\">\r\n                                                <div className=\"d-flex align-items-center gap-2 mb-2\">\r\n                                                    <h5 className=\"fw-bold mb-0\">{comp.title}</h5>\r\n                                                    <span className={`badge ${comp.status === 'resolved' ? 'bg-success' : 'bg-danger'}`}>{comp.status}</span>\r\n                                                </div>\r\n\r\n                                                <p className=\"card-text opacity-75 mb-3\">{comp.description}</p>\r\n                                                \r\n                                                <small className=\"text-muted d-block border-top pt-2\">\r\n                                                    Posted by: <strong>{comp.postedBy?.name}</strong> (Villa {comp.postedBy?.unitNumber})\r\n                                                    <span className=\"float-end\">{new Date(comp.createdAt).toLocaleDateString()}</span>\r\n                                                </small>\r\n                                            </div>\r\n\r\n                                            <div className=\"d-flex flex-column gap-2 ms-3\">\r\n                                                {user.role === 'admin' && comp.status === 'open' && (\r\n                                                    <button className=\"btn btn-sm btn-success\" onClick={() => handleResolveComplaint(comp._id)}><FaCheck/></button>\r\n                                                )}\r\n                                                {(comp.postedBy && comp.postedBy._id === user._id) && (\r\n                                                    <>\r\n                                                        <button className=\"btn btn-sm btn-outline-primary\" onClick={() => startEditComplaint(comp)}><FaEdit/></button>\r\n                                                        <button className=\"btn btn-sm btn-outline-danger\" onClick={() => handleDeleteComplaint(comp._id)}><FaTrash/></button>\r\n                                                    </>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {complaints.length === 0 && <p className=\"text-muted text-center mt-4\">No complaints yet.</p>}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </PageTransition>\r\n    );\r\n};\r\n\r\nexport default Community;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}