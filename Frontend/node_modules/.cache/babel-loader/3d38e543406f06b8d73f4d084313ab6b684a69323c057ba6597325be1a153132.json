{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive\\\\Desktop\\\\MySociety\\\\Frontend\\\\src\\\\pages\\\\Admin\\\\CreateInvoice.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../../api/api';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateInvoice = () => {\n  _s();\n  const navigate = useNavigate();\n  const [mode, setMode] = useState('single');\n  const [singleUnitNumber, setSingleUnitNumber] = useState('');\n  const [allResidents, setAllResidents] = useState([]);\n  const [selectedResidentIds, setSelectedResidentIds] = useState([]);\n  const [formData, setFormData] = useState({\n    dueDate: '',\n    amount: 0,\n    lineItems: []\n  });\n  const [lineItemInput, setLineItemInput] = useState({\n    description: '',\n    amount: 0\n  });\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const fetchResidents = async () => {\n      try {\n        const res = await api.get('/admin/residents');\n        const approved = res.data.filter(u => u.role === 'resident' && u.isApproved);\n        setAllResidents(approved);\n        setSelectedResidentIds(approved.map(u => u._id));\n      } catch (err) {\n        console.error(\"Could not fetch residents for bulk list\");\n      }\n    };\n    fetchResidents();\n  }, []);\n  const handleFormChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleLineItemChange = e => {\n    setLineItemInput({\n      ...lineItemInput,\n      [e.target.name]: e.target.value\n    });\n  };\n  const toggleResidentSelection = id => {\n    if (selectedResidentIds.includes(id)) {\n      setSelectedResidentIds(selectedResidentIds.filter(rId => rId !== id));\n    } else {\n      setSelectedResidentIds([...selectedResidentIds, id]);\n    }\n  };\n  const addLineItem = () => {\n    if (lineItemInput.description && lineItemInput.amount > 0) {\n      setFormData({\n        ...formData,\n        lineItems: [...formData.lineItems, {\n          description: lineItemInput.description,\n          amount: Number(lineItemInput.amount)\n        }]\n      });\n      setLineItemInput({\n        description: '',\n        amount: 0\n      });\n      const newTotal = formData.lineItems.reduce((sum, item) => sum + item.amount, 0) + Number(lineItemInput.amount);\n      setFormData(prev => ({\n        ...prev,\n        amount: newTotal\n      }));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setMessage('');\n    setError('');\n    setLoading(true);\n    if (formData.amount <= 0 || !formData.dueDate) {\n      setLoading(false);\n      return setError('Total amount must be greater than zero and due date is required.');\n    }\n    // Build payload(s). If multiple line items exist we will create separate invoices\n    // per line item so residents receive individual bills rather than a single summed bill.\n    const dueDateISO = new Date(formData.dueDate).toISOString();\n\n    // Validate selection based on mode\n    if (mode === 'single' && !singleUnitNumber) {\n      setLoading(false);\n      return setError('Please enter a Villa/Unit Number.');\n    }\n    if (mode === 'bulk' && selectedResidentIds.length === 0) {\n      setLoading(false);\n      return setError('Please select at least one resident.');\n    }\n    try {\n      let responses = [];\n\n      // If there are multiple line items, create separate invoices per line item.\n      // For single mode: create one invoice per line item for the specified Villa.\n      // For bulk mode: for each line item, create invoices for all selected residents (backend handles residentIds).\n      if (formData.lineItems && formData.lineItems.length > 1) {\n        // Create an API call for each line item\n        const calls = formData.lineItems.map(item => {\n          const p = {\n            amount: item.amount,\n            dueDate: dueDateISO,\n            lineItems: [{\n              description: item.description,\n              amount: item.amount\n            }],\n            isBulk: mode === 'bulk'\n          };\n          if (mode === 'single') p.unitNumber = singleUnitNumber;else p.residentIds = selectedResidentIds;\n          return api.post('/invoices/create', p);\n        });\n        responses = await Promise.all(calls);\n      } else {\n        // Single or zero line items: fall back to original behavior (single invoice containing lineItems)\n        const payload = {\n          amount: formData.amount,\n          dueDate: dueDateISO,\n          lineItems: formData.lineItems,\n          isBulk: mode === 'bulk'\n        };\n        if (mode === 'single') payload.unitNumber = singleUnitNumber;else payload.residentIds = selectedResidentIds;\n        const res = await api.post('/invoices/create', payload);\n        responses = [res];\n      }\n\n      // Count created invoices — backend may return arrays or counts; we infer from responses\n      let createdCount = 0;\n      responses.forEach(r => {\n        if (r.data) {\n          if (Array.isArray(r.data.invoices)) createdCount += r.data.invoices.length;else if (typeof r.data.count === 'number') createdCount += r.data.count;else createdCount += 1;\n        }\n      });\n      const successMsg = mode === 'bulk' ? `Successfully created ${createdCount} invoices for ${selectedResidentIds.length} resident(s)!` : `Successfully created ${createdCount} invoice(s)!`;\n      setMessage(successMsg);\n      setSingleUnitNumber('');\n      setFormData({\n        dueDate: '',\n        amount: 0,\n        lineItems: []\n      });\n      if (mode === 'bulk') setSelectedResidentIds(allResidents.map(u => u._id));\n      setTimeout(() => navigate('/admin/dashboard'), 2000);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Invoice creation failed.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Generate Maintenance Invoice\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"card p-4 mx-auto shadow-sm\",\n      style: {\n        maxWidth: '800px'\n      },\n      children: [message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 29\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-group\",\n          role: \"group\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            className: \"btn-check\",\n            name: \"mode\",\n            id: \"single\",\n            autoComplete: \"off\",\n            checked: mode === 'single',\n            onChange: () => setMode('single')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"btn btn-outline-primary\",\n            htmlFor: \"single\",\n            children: \"Single Villa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            className: \"btn-check\",\n            name: \"mode\",\n            id: \"bulk\",\n            autoComplete: \"off\",\n            checked: mode === 'bulk',\n            onChange: () => setMode('bulk')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"btn btn-outline-primary\",\n            htmlFor: \"bulk\",\n            children: \"Bulk (All Residents)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [mode === 'single' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Villa No.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: singleUnitNumber,\n            onChange: e => setSingleUnitNumber(e.target.value),\n            className: \"form-control\",\n            placeholder: \"e.g. 9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Due Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"dueDate\",\n            value: formData.dueDate,\n            onChange: handleFormChange,\n            required: true,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), mode === 'bulk' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label fw-bold\",\n          children: [\"Select Residents (\", selectedResidentIds.length, \" selected)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-3 resident-selection-container\",\n          style: {\n            maxHeight: '200px',\n            overflowY: 'auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row g-2\",\n            children: allResidents.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted\",\n              children: \"No active residents found.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 37\n            }, this) : allResidents.map(resident => {\n              const isSelected = selectedResidentIds.includes(resident._id);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4 col-sm-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `resident-card ${isSelected ? 'selected' : 'unselected'} card`,\n                  onClick: () => toggleResidentSelection(resident._id),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex w-100 justify-content-between align-items-start\",\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"fw-bold\",\n                      children: [\"Villa: \", resident.unitNumber]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 57\n                    }, this), isSelected ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"badge resident-badge-yes\",\n                      children: \"\\u2713\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 71\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"badge resident-badge-no\",\n                      children: \"\\u2715\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 125\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    style: {\n                      fontSize: '0.85rem'\n                    },\n                    children: resident.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 49\n                }, this)\n              }, resident._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 45\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Line Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row g-2 mb-3 align-items-end\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"description\",\n            value: lineItemInput.description,\n            onChange: handleLineItemChange,\n            className: \"form-control\",\n            placeholder: \"e.g., Monthly Maintenance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"amount\",\n            value: lineItemInput.amount,\n            onChange: handleLineItemChange,\n            className: \"form-control\",\n            min: \"0\",\n            step: \"0.01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-3\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: addLineItem,\n            className: \"btn btn-secondary w-100\",\n            children: \"Add Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-group mb-3\",\n        children: formData.lineItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.amount.toLocaleString('en-IN', {\n              style: 'currency',\n              currency: 'INR',\n              maximumFractionDigits: 2\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-end\",\n        children: [\"Total: \", formData.amount.toLocaleString('en-IN', {\n          style: 'currency',\n          currency: 'INR',\n          maximumFractionDigits: 2\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary w-100 mt-3\",\n        disabled: loading,\n        children: loading ? 'Processing...' : mode === 'bulk' ? `Send to ${selectedResidentIds.length} Residents` : 'Generate Invoice'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateInvoice, \"/PNHkWjvuO8Taei0wgr5D0Uj6Rs=\", false, function () {\n  return [useNavigate];\n});\n_c = CreateInvoice;\nexport default CreateInvoice;\nvar _c;\n$RefreshReg$(_c, \"CreateInvoice\");","map":{"version":3,"names":["React","useState","useEffect","api","useNavigate","jsxDEV","_jsxDEV","CreateInvoice","_s","navigate","mode","setMode","singleUnitNumber","setSingleUnitNumber","allResidents","setAllResidents","selectedResidentIds","setSelectedResidentIds","formData","setFormData","dueDate","amount","lineItems","lineItemInput","setLineItemInput","description","message","setMessage","error","setError","loading","setLoading","fetchResidents","res","get","approved","data","filter","u","role","isApproved","map","_id","err","console","handleFormChange","e","target","name","value","handleLineItemChange","toggleResidentSelection","id","includes","rId","addLineItem","Number","newTotal","reduce","sum","item","prev","handleSubmit","preventDefault","dueDateISO","Date","toISOString","length","responses","calls","p","isBulk","unitNumber","residentIds","post","Promise","all","payload","createdCount","forEach","r","Array","isArray","invoices","count","successMsg","setTimeout","_err$response","_err$response$data","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","style","maxWidth","type","autoComplete","checked","onChange","htmlFor","placeholder","required","maxHeight","overflowY","resident","isSelected","onClick","fontSize","min","step","index","toLocaleString","currency","maximumFractionDigits","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Dell/OneDrive/Desktop/MySociety/Frontend/src/pages/Admin/CreateInvoice.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/api';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst CreateInvoice = () => {\r\n    const navigate = useNavigate();\r\n    const [mode, setMode] = useState('single'); \r\n    const [singleUnitNumber, setSingleUnitNumber] = useState('');\r\n    const [allResidents, setAllResidents] = useState([]); \r\n    const [selectedResidentIds, setSelectedResidentIds] = useState([]); \r\n\r\n    const [formData, setFormData] = useState({\r\n        dueDate: '',\r\n        amount: 0,\r\n        lineItems: []\r\n    });\r\n\r\n    const [lineItemInput, setLineItemInput] = useState({ description: '', amount: 0 });\r\n    const [message, setMessage] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchResidents = async () => {\r\n            try {\r\n                const res = await api.get('/admin/residents');\r\n                const approved = res.data.filter(u => u.role === 'resident' && u.isApproved);\r\n                setAllResidents(approved);\r\n                setSelectedResidentIds(approved.map(u => u._id));\r\n            } catch (err) {\r\n                console.error(\"Could not fetch residents for bulk list\");\r\n            }\r\n        };\r\n        fetchResidents();\r\n    }, []);\r\n\r\n    const handleFormChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n    \r\n    const handleLineItemChange = (e) => {\r\n        setLineItemInput({ ...lineItemInput, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const toggleResidentSelection = (id) => {\r\n        if (selectedResidentIds.includes(id)) {\r\n            setSelectedResidentIds(selectedResidentIds.filter(rId => rId !== id));\r\n        } else {\r\n            setSelectedResidentIds([...selectedResidentIds, id]);\r\n        }\r\n    };\r\n\r\n    const addLineItem = () => {\r\n        if (lineItemInput.description && lineItemInput.amount > 0) {\r\n            setFormData({\r\n                ...formData,\r\n                lineItems: [...formData.lineItems, { description: lineItemInput.description, amount: Number(lineItemInput.amount) }]\r\n            });\r\n            setLineItemInput({ description: '', amount: 0 });\r\n            const newTotal = formData.lineItems.reduce((sum, item) => sum + item.amount, 0) + Number(lineItemInput.amount);\r\n            setFormData(prev => ({ ...prev, amount: newTotal }));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setMessage('');\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        if (formData.amount <= 0 || !formData.dueDate) {\r\n            setLoading(false);\r\n            return setError('Total amount must be greater than zero and due date is required.');\r\n        }\r\n        // Build payload(s). If multiple line items exist we will create separate invoices\r\n        // per line item so residents receive individual bills rather than a single summed bill.\r\n        const dueDateISO = new Date(formData.dueDate).toISOString();\r\n\r\n        // Validate selection based on mode\r\n        if (mode === 'single' && !singleUnitNumber) {\r\n            setLoading(false);\r\n            return setError('Please enter a Villa/Unit Number.');\r\n        }\r\n        if (mode === 'bulk' && selectedResidentIds.length === 0) {\r\n            setLoading(false);\r\n            return setError('Please select at least one resident.');\r\n        }\r\n\r\n        try {\r\n            let responses = [];\r\n\r\n            // If there are multiple line items, create separate invoices per line item.\r\n            // For single mode: create one invoice per line item for the specified Villa.\r\n            // For bulk mode: for each line item, create invoices for all selected residents (backend handles residentIds).\r\n            if (formData.lineItems && formData.lineItems.length > 1) {\r\n                // Create an API call for each line item\r\n                const calls = formData.lineItems.map(item => {\r\n                    const p = {\r\n                        amount: item.amount,\r\n                        dueDate: dueDateISO,\r\n                        lineItems: [{ description: item.description, amount: item.amount }],\r\n                        isBulk: mode === 'bulk'\r\n                    };\r\n                    if (mode === 'single') p.unitNumber = singleUnitNumber;\r\n                    else p.residentIds = selectedResidentIds;\r\n                    return api.post('/invoices/create', p);\r\n                });\r\n\r\n                responses = await Promise.all(calls);\r\n            } else {\r\n                // Single or zero line items: fall back to original behavior (single invoice containing lineItems)\r\n                const payload = {\r\n                    amount: formData.amount,\r\n                    dueDate: dueDateISO,\r\n                    lineItems: formData.lineItems,\r\n                    isBulk: mode === 'bulk'\r\n                };\r\n                if (mode === 'single') payload.unitNumber = singleUnitNumber;\r\n                else payload.residentIds = selectedResidentIds;\r\n\r\n                const res = await api.post('/invoices/create', payload);\r\n                responses = [res];\r\n            }\r\n\r\n            // Count created invoices — backend may return arrays or counts; we infer from responses\r\n            let createdCount = 0;\r\n            responses.forEach(r => {\r\n                if (r.data) {\r\n                    if (Array.isArray(r.data.invoices)) createdCount += r.data.invoices.length;\r\n                    else if (typeof r.data.count === 'number') createdCount += r.data.count;\r\n                    else createdCount += 1;\r\n                }\r\n            });\r\n\r\n            const successMsg = mode === 'bulk'\r\n                ? `Successfully created ${createdCount} invoices for ${selectedResidentIds.length} resident(s)!`\r\n                : `Successfully created ${createdCount} invoice(s)!`;\r\n\r\n            setMessage(successMsg);\r\n            setSingleUnitNumber('');\r\n            setFormData({ dueDate: '', amount: 0, lineItems: [] });\r\n            if (mode === 'bulk') setSelectedResidentIds(allResidents.map(u => u._id));\r\n            setTimeout(() => navigate('/admin/dashboard'), 2000);\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'Invoice creation failed.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mt-4\">\r\n            <h2>Generate Maintenance Invoice</h2>\r\n            \r\n            <form onSubmit={handleSubmit} className=\"card p-4 mx-auto shadow-sm\" style={{ maxWidth: '800px' }}>\r\n                {message && <div className=\"alert alert-success\">{message}</div>}\r\n                {error && <div className=\"alert alert-danger\">{error}</div>}\r\n\r\n                <div className=\"mb-4 text-center\">\r\n                    <div className=\"btn-group\" role=\"group\">\r\n                        <input type=\"radio\" className=\"btn-check\" name=\"mode\" id=\"single\" autoComplete=\"off\" checked={mode === 'single'} onChange={() => setMode('single')} />\r\n                        <label className=\"btn btn-outline-primary\" htmlFor=\"single\">Single Villa</label>\r\n\r\n                        <input type=\"radio\" className=\"btn-check\" name=\"mode\" id=\"bulk\" autoComplete=\"off\" checked={mode === 'bulk'} onChange={() => setMode('bulk')} />\r\n                        <label className=\"btn btn-outline-primary\" htmlFor=\"bulk\">Bulk (All Residents)</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                    {mode === 'single' && (\r\n                        <div className=\"col-md-6 mb-3\">\r\n                            {/* UPDATED LABEL */}\r\n                            <label className=\"form-label\">Villa No.</label>\r\n                            <input \r\n                                type=\"text\" \r\n                                value={singleUnitNumber} \r\n                                onChange={(e) => setSingleUnitNumber(e.target.value)} \r\n                                className=\"form-control\" \r\n                                placeholder=\"e.g. 9\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"col-md-6 mb-3\">\r\n                        <label className=\"form-label\">Due Date</label>\r\n                        <input type=\"date\" name=\"dueDate\" value={formData.dueDate} onChange={handleFormChange} required className=\"form-control\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {mode === 'bulk' && (\r\n                    <div className=\"mb-4\">\r\n                        <label className=\"form-label fw-bold\">Select Residents ({selectedResidentIds.length} selected)</label>\r\n                        <div className=\"card p-3 resident-selection-container\" style={{ maxHeight: '200px', overflowY: 'auto' }}>\r\n                            <div className=\"row g-2\">\r\n                                {allResidents.length === 0 ? (\r\n                                    <p className=\"text-muted\">No active residents found.</p>\r\n                                ) : (\r\n                                    allResidents.map(resident => {\r\n                                        const isSelected = selectedResidentIds.includes(resident._id);\r\n                                        return (\r\n                                            <div key={resident._id} className=\"col-md-4 col-sm-6\">\r\n                                                <div\r\n                                                    className={`resident-card ${isSelected ? 'selected' : 'unselected'} card`}\r\n                                                    onClick={() => toggleResidentSelection(resident._id)}\r\n                                                >\r\n                                                    <div className=\"d-flex w-100 justify-content-between align-items-start\">\r\n                                                        <small className=\"fw-bold\">Villa: {resident.unitNumber}</small>\r\n                                                        {isSelected ? <span className=\"badge resident-badge-yes\">✓</span> : <span className=\"badge resident-badge-no\">✕</span>}\r\n                                                    </div>\r\n                                                    <small style={{ fontSize: '0.85rem' }}>{resident.name}</small>\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <hr/>\r\n                <h4>Line Items</h4>\r\n                <div className=\"row g-2 mb-3 align-items-end\">\r\n                    <div className=\"col-md-6\">\r\n                        <label className=\"form-label\">Description</label>\r\n                        <input type=\"text\" name=\"description\" value={lineItemInput.description} onChange={handleLineItemChange} className=\"form-control\" placeholder=\"e.g., Monthly Maintenance\" />\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                        <label className=\"form-label\">Amount</label>\r\n                        <input type=\"number\" name=\"amount\" value={lineItemInput.amount} onChange={handleLineItemChange} className=\"form-control\" min=\"0\" step=\"0.01\" />\r\n                    </div>\r\n                    <div className=\"col-md-3\">\r\n                        <button type=\"button\" onClick={addLineItem} className=\"btn btn-secondary w-100\">Add Item</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <ul className=\"list-group mb-3\">\r\n                    {formData.lineItems.map((item, index) => (\r\n                        <li key={index} className=\"list-group-item d-flex justify-content-between\">\r\n                            <span>{item.description}</span>\r\n                            <span>{(item.amount).toLocaleString('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 2 })}</span>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n                <h3 className=\"text-end\">Total: { (formData.amount).toLocaleString('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 2 }) }</h3>\r\n                \r\n                <button type=\"submit\" className=\"btn btn-primary w-100 mt-3\" disabled={loading}>\r\n                    {loading ? 'Processing...' : (mode === 'bulk' ? `Send to ${selectedResidentIds.length} Residents` : 'Generate Invoice')}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateInvoice;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}